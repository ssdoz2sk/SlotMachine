webpackJsonp([1],{L59s:function(t,e){},LCRO:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var a=i("VU/8")({name:"App"},n,!1,function(t){i("LCRO")},null,null).exports,r=i("/ocq"),c=i("woOf"),l=i.n(c),o=i("mvHQ"),h=i.n(o),u=i("7nRM"),g=i.n(u),d=i("c/Tr"),f=i.n(d),m={name:"Gift",props:{trigger:{type:Date,default:!1},resetTrigger:{type:Date,default:!1},config:{type:Object,required:!0}},data:function(){return{isRunning:!1,currentDeg:0,targetDeg:0,giftsDeg:[]}},computed:{displayType:function(){return this.config.run3D?"three-dimension":"flat"},rotate:function(){return 360/this.config.gifts.length},translateZ:function(){return this.config.height/2/Math.tan(this.rotate/2/180*Math.PI)}},watch:{config:{handler:function(){this.setConfig()},deep:!0},trigger:function(){this.autoTurn()},resetTrigger:function(){this.reset()},isRunning:function(){var t=this;this.isRunning&&setTimeout(function(){t.autoTurnStop()},this.config.duration+200)}},mounted:function(){this.setConfig(),this.logGiftsDeg()},destroyed:function(){},methods:{logGiftsDeg:function(){var t=this;this.config.gifts.forEach(function(e,i){t.giftsDeg[i]={from:0===i?0:t.giftsDeg[i-1].to,to:0===i?t.rotate:t.giftsDeg[i-1].to+t.rotate,name:e.name}})},setConfig:function(){this.$el.style.setProperty("--rotateY",this.config.rotateY+"deg"),this.$el.style.setProperty("--duration",this.config.duration+"ms"),this.$el.style.setProperty("--fontSize",this.config.fontSize+"px"),this.$el.style.setProperty("--height",this.config.height+"px"),this.$el.style.setProperty("--width",this.config.width+"px"),this.$el.style.setProperty("--currentDeg","-"+this.currentDeg+"deg")},autoTurn:function(){var t=this,e=360*Math.random()+1800;if(this.config.targetGift){var i=this.config.gifts.findIndex(function(e){return e.name===t.config.targetGift});e=-1!==i?i/this.config.gifts.length*360+1800:0}e-=e%this.rotate,this.targetDeg=e;var s=this.config.rollback?Math.random()*this.config.rollback+1:1;this.$el.style.setProperty("--targetDeg","-"+this.targetDeg+"deg"),this.$el.style.setProperty("--rollBackDeg",""+s),this.isRunning=!0},autoTurnStop:function(){this.currentDeg=this.targetDeg%360,this.$el.style.setProperty("--currentDeg","-"+this.currentDeg+"deg");var t=null,e=this.currentDeg+this.rotate/2;this.giftsDeg.forEach(function(i){e>=i.from&&e<=i.to&&(t=i.name)}),this.isRunning=!1,this.$emit("finished",t)},reset:function(){this.currentDeg=0,this.$el.style.setProperty("--currentDeg","-"+this.currentDeg+"deg")}}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["gift-container",t.displayType,{autoTurn:t.isRunning}]},t._l(t.config.gifts,function(e,s){return i("div",{key:s,class:["gift",t.config.style],style:"transform: rotateX("+t.rotate*s+"deg) translateZ("+t.translateZ+"px)"},["text"===e.type?[t._v(t._s(e.name))]:t._e(),t._v(" "),"image"===e.type?[i("img",{attrs:{src:e.path,height:t.config.height}})]:t._e()],2)}),0)},staticRenderFns:[]};var p={name:"SlotMachine",components:{Gift:i("VU/8")(m,v,!1,function(t){i("L59s")},null,null).exports},data:function(){return{run3D:!1,trigger:null,resetTrigger:null,active:!1,disabled:!1,title:"資工系大抽獎",configs:[{style:"gift-style",gifts:f()(new Array(10),function(t,e){return{type:"image",path:"./static/hsujm.jpg"}}),targetGift:null,duration:4e3,fontSize:150,height:200,width:200},{style:"gift-style",gifts:f()(new Array(10),function(t,e){return{type:"image",path:"./static/hsujm.jpg"}}),targetGift:null,duration:5e3,fontSize:150,height:200,width:200},{style:"gift-style",gifts:f()(new Array(10),function(t,e){return{type:"image",path:"./static/hsujm.jpg"}}),targetGift:null,duration:6e3,fontSize:150,height:200,width:200}],openSetting:!1,nameList:[],resultList:[],result:[],msg:"",isRandomSelect:!0,awards:{intellectualAchievementAward1:"",intellectualAchievementAward2:"",intellectualAchievementAward3:"",moralAchievementAward:"",sportsAchievementAward:""}}},watch:{nameList:{handler:function(t){var e=this;if(0!==t.length){var i=t.map(function(t){return e.splitName(t)}).reduce(function(t,e){return t.lastName.push({type:"text",name:e[0]}),t.firstName1.push({type:"text",name:e[1]}),t.firstName2.push({type:"text",name:e[2]}),t},{lastName:[{type:"image",path:"./static/hsujm.jpg"}],firstName1:[{type:"image",path:"./static/hsujm.jpg"}],firstName2:[{type:"image",path:"./static/hsujm.jpg"}]});this.configs[0].gifts=i.lastName,this.configs[1].gifts=i.firstName1,this.configs[2].gifts=i.firstName2}else this.configs[0].gifts=f()(new Array(10),function(t,e){return{type:"image",path:"./static/hsujm.jpg"}}),this.configs[1].gifts=f()(new Array(10),function(t,e){return{type:"image",path:"./static/hsujm.jpg"}}),this.configs[2].gifts=f()(new Array(10),function(t,e){return{type:"image",path:"./static/hsujm.jpg"}})}}},methods:{splitName:function(t){return 3===t.length?[t[0],t[1],t[2]]:2===t.length?[t[0],"",t[1]]:t},readNameList:function(t){var e=this,i=t.target.files[0],s=new FileReader;s.onload=function(t){e.$emit("load",t.target.result);var i=t.target.result.split("\n");e.nameList=i.map(function(t){return t.trim().split(" ")[0]}),i.forEach(function(t){var i=t.trim().split(" "),s=g()(i),n=s[0],a=s.slice(1);a.find(function(t){return"智育獎1"===t})&&(e.awards.intellectualAchievementAward1=n),a.find(function(t){return"智育獎2"===t})&&(e.awards.intellectualAchievementAward2=n),a.find(function(t){return"智育獎3"===t})&&(e.awards.intellectualAchievementAward3=n),a.find(function(t){return"德育獎"===t})&&(e.awards.moralAchievementAward=n),a.find(function(t){return"體育獎"===t})&&(e.awards.sportsAchievementAward=n)}),window.localStorage.setItem("awards",h()(e.awards)),window.localStorage.setItem("nameList",h()(e.nameList)),e.resetTrigger=new Date},s.readAsText(i)},randomSelectClick:function(){this.configs.forEach(function(t){t.targetGift=null}),this.title="資工系大抽獎",this.resetTrigger=new Date,this.isRandomSelect=!0},intellectualAchievementAwardClick:function(t){var e=void 0;1===t?(e=this.splitName(this.awards.intellectualAchievementAward1),this.title="智育獎 - 第1名"):2===t?(e=this.splitName(this.awards.intellectualAchievementAward2),this.title="智育獎 - 第2名"):3===t&&(e=this.splitName(this.awards.intellectualAchievementAward3),this.title="智育獎 - 第3名"),this.configs[0].targetGift=e[0],this.configs[1].targetGift=e[1],this.configs[2].targetGift=e[2],this.resetTrigger=new Date,this.isRandomSelect=!1},moralAchievementAwardClick:function(){var t=this.splitName(this.awards.moralAchievementAward);this.title="德育獎",this.configs[0].targetGift=t[0],this.configs[1].targetGift=t[1],this.configs[2].targetGift=t[2],this.resetTrigger=new Date,this.isRandomSelect=!1},sportsAchievementAwardClick:function(){var t=this.splitName(this.awards.sportsAchievementAward);this.title="體育獎",this.configs[0].targetGift=t[0],this.configs[1].targetGift=t[1],this.configs[2].targetGift=t[2],this.resetTrigger=new Date,this.isRandomSelect=!1},turn:function(){var t=this;if(this.isRandomSelect&&0!==this.nameList.length){var e=Math.ceil(Math.random()*this.nameList.length);this.configs[0].targetGift=this.configs[0].gifts[e].name,this.configs[1].targetGift=this.configs[1].gifts[e].name,this.configs[2].targetGift=this.configs[2].gifts[e].name}new Audio("./static/smj2.mp3").play(),this.active=!0,setTimeout(function(){t.active=!1},500),this.disabled=!0,this.trigger=new Date},isFinished:function(t){new Audio("./static/pyo1.mp3").play();var e=this.$el.querySelectorAll(".autoTurn");this.result.push(t),1===e.length&&(this.disabled=!1,this.resultList.push(this.result),this.result=[])},reset:function(){this.nameList=[],this.awards={intellectualAchievementAward1:"",intellectualAchievementAward2:"",intellectualAchievementAward3:"",moralAchievementAward:"",sportsAchievementAward:""},window.localStorage.removeItem("nameList"),window.localStorage.removeItem("awards")}},mounted:function(){var t=window.localStorage.getItem("awards"),e=window.localStorage.getItem("nameList");t&&(t=JSON.parse(t),this.awards=l()({},this.awards,t)),e&&(e=JSON.parse(e),this.nameList=e)}},w={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"SlotMachine"}},[i("div",{staticClass:"badge"},[i("span",[t._v(t._s(t.title))])]),t._v(" "),i("div",{staticClass:"body"},[i("div",{staticClass:"window"},[i("div",{staticClass:"container"},[t._l(t.configs,function(e,s){return i("Gift",{key:s,attrs:{resetTrigger:t.resetTrigger,trigger:t.trigger,config:e},on:{finished:t.isFinished}})}),t._v(" "),i("div",{staticClass:"fence1"}),t._v(" "),i("div",{staticClass:"fence2"})],2)]),t._v(" "),i("div",{class:["handler",{active:t.active},{disabled:t.disabled}]},[i("div",{staticClass:"stick2"}),t._v(" "),i("div",{staticClass:"stick"}),t._v(" "),i("div",{staticClass:"ball",on:{click:function(e){!t.disabled&&t.turn()}}})])]),t._v(" "),i("div",{staticClass:"select-button-group"},[i("div",{staticClass:"select-button",class:{disabled:t.disabled},on:{click:function(e){!t.disabled&&t.intellectualAchievementAwardClick(1)}}},[t._v("\n      智育獎 1\n    ")]),t._v(" "),i("div",{staticClass:"select-button",class:{disabled:t.disabled},on:{click:function(e){!t.disabled&&t.intellectualAchievementAwardClick(2)}}},[t._v("\n      智育獎 2\n    ")]),t._v(" "),i("div",{staticClass:"select-button",class:{disabled:t.disabled},on:{click:function(e){!t.disabled&&t.intellectualAchievementAwardClick(3)}}},[t._v("\n      智育獎 3\n    ")]),t._v(" "),i("div",{staticClass:"select-button",class:{disabled:t.disabled},on:{click:function(e){!t.disabled&&t.moralAchievementAwardClick()}}},[t._v("\n      德育獎\n    ")]),t._v(" "),i("div",{staticClass:"select-button",class:{disabled:t.disabled},on:{click:function(e){!t.disabled&&t.sportsAchievementAwardClick()}}},[t._v("\n      體育獎\n    ")]),t._v(" "),i("div",{staticClass:"select-button",class:{disabled:t.disabled},on:{click:function(e){!t.disabled&&t.randomSelectClick()}}},[t._v("\n      幸運獎\n    ")])]),t._v(" "),i("div",{class:["resultList",{openSetting:t.openSetting}],on:{click:function(e){if(e.target!==e.currentTarget)return null;t.openSetting=!1}}},[i("div",{staticClass:"resultList-container"},[i("div",{staticClass:"result"},[i("div",{staticClass:"msg"},[t._v(t._s(t.msg))]),t._v(" "),i("div",[i("label",{attrs:{for:"nameListInput"}},[t._v("名單匯入")]),t._v(" "),i("input",{attrs:{type:"file",id:"nameListInput"},on:{change:t.readNameList}})]),t._v(" "),t._m(0),t._v(" "),i("div",[i("ul",[i("li",[t._v("智育獎1："+t._s(t.awards.intellectualAchievementAward1))]),t._v(" "),i("li",[t._v("智育獎2："+t._s(t.awards.intellectualAchievementAward2))]),t._v(" "),i("li",[t._v("智育獎3："+t._s(t.awards.intellectualAchievementAward3))]),t._v(" "),i("li",[t._v("德育獎："+t._s(t.awards.moralAchievementAward))]),t._v(" "),i("li",[t._v("體育獎："+t._s(t.awards.sportsAchievementAward))])])]),t._v(" "),t._m(1),t._v(" "),i("div",{staticClass:"select-button-group"},[i("div",{staticClass:"select-button",staticStyle:{"flex-direction":"row-reverse","justify-content":"flex-end"},on:{click:function(e){return t.reset()}}},[t._v("\n              清空\n          ")])])])])]),t._v(" "),i("div",{staticClass:"setting"},[i("span",{on:{click:function(e){t.openSetting=!0}}},[t._v("→ Setting")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[e("small",[this._v("請使用只有名字的 UTF-8 檔案, 每行一個人名，後面使用空白隔開他獲得的獎項")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"info"},[e("span",[e("small",[this._v("如果名單已經匯入，將會存在 localStorage，關閉瀏覽器也不會消失，可以按最下方按鈕清除所有已存在的資訊，或重新匯入檔案")])])])}]};var A=i("VU/8")(p,w,!1,function(t){i("jsUL")},null,null).exports;s.a.use(r.a);var _=new r.a({routes:[{path:"/",name:"SlotMachine",component:A}]});s.a.config.productionTip=!1,new s.a({el:"#app",router:_,components:{App:a},template:"<App/>"})},jsUL:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.27de6f0f2ccc6712d7b4.js.map